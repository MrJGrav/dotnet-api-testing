parameters:
  - name: azureServiceConnection
    type: string
    default:
  - name: functionAppServiceFilePath
    type: string
    default:
  - name: functionAppName
    type: string
    default:
  - name: env
    type: string
    default: 
  - name: resourceGroupName
    type: string
    default:
  

steps:
  - task: DownloadBuildArtifacts@0
    displayName: 'Download function app service artifact'
    inputs:
      buildType: 'current'
      artifactName: 'service'
      downloadPath: '$(System.ArtifactsDirectory)'                

  - task: AzureFunctionApp@1
    displayName: "Deploy function app"
    inputs:
      azureSubscription: ${{ parameters.azureServiceConnection }}
      appType: 'functionApp'
      appName: ${{ parameters.functionAppName }}
      package: '$(System.ArtifactsDirectory)${{ parameters.functionAppServiceFilePath }}'
      deploymentMethod: 'runFromPackage' 
